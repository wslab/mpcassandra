apt:
  sources:
    cassandra.sources.list:
      key: |
        -----BEGIN PGP PUBLIC KEY BLOCK-----

        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
        E6p3itpaZgB9hVn3uDs=
        =NPWM
        -----END PGP PUBLIC KEY BLOCK-----
      source: deb https://downloads.apache.org/cassandra/debian 311x main
package_update: true
packages:
- openjdk-8-jdk-headless
- cassandra
write_files:
- content: |
    #!/bin/bash
    MYIP=`hostname -I`
    # trip trailing spaces
    MYIP="$(echo -e "${MYIP}" | sed -e 's/[[:space:]]*$//')"
    # replace seeds setting
    sed -i.bak "s/127.0.0.1/$MYIP/" /etc/cassandra/cassandra.yaml
  owner: root
  path: /root/set-seeds.sh
  permissions: '0755'

